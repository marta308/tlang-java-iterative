<!-- Targets for working from terminal window:
       
 -->
	
<project name="TLang-jars" default="make all jars" basedir=".">
	
<import file="build.xml"/>
	
	<target name="iterative_0">
		<antcall target="cleanGen"></antcall>
		<copy file="adaptation/Compositions_iter_0.jrag" tofile="src/spec/Compositions.jrag" overwrite="true"/>
		<copy file="adaptation/PerformCompositions_iter.java" tofile="src/exampleprogs/PerformCompositions.java" overwrite="true"/>
		<eclipse.refreshLocal resource="./TLang/src" depth="infinite"/>
		<antcall target="build_iter"></antcall>
		<eclipse.refreshLocal resource="./TLang" depth="infinite"/>
		<jar destfile="./tlang-iterative_0.jar" filesetmanifest="mergewithoutmain">
			<manifest>
		    	<attribute name="Main-Class" value="exampleprogs.Main"/>
		        <attribute name="Class-Path" value="."/>
		    </manifest>
		    <fileset dir="./src"/>
			<fileset dir="./src-gen"/>
		</jar>
	</target>
	
	<target name="iterative_1">
		<antcall target="cleanGen"></antcall>
		<copy file="adaptation/Compositions_iter_1.jrag" tofile="src/spec/Compositions.jrag" overwrite="true"/>
		<copy file="adaptation/PerformCompositions_iter.java" tofile="src/exampleprogs/PerformCompositions.java" overwrite="true"/>
		<eclipse.refreshLocal resource="./TLang/src" depth="infinite"/>
		<antcall target="build_iter"></antcall>
		<eclipse.refreshLocal resource="./TLang" depth="infinite"/>
		<jar destfile="./tlang-iterative_1.jar" filesetmanifest="mergewithoutmain">
			<manifest>
			   	<attribute name="Main-Class" value="exampleprogs.Main"/>
			    <attribute name="Class-Path" value="."/>
			</manifest>
			<fileset dir="./src"/>
			<fileset dir="./src-gen"/>
		</jar>
	</target>
	
	<target name="iterative_n">
		<antcall target="cleanGen"></antcall>
		<copy file="adaptation/Compositions_iter_n.jrag" tofile="src/spec/Compositions.jrag" overwrite="true"/>
		<copy file="adaptation/PerformCompositions_iter.java" tofile="src/exampleprogs/PerformCompositions.java" overwrite="true"/>
		<eclipse.refreshLocal resource="./TLang/src" depth="infinite"/>
		<antcall target="build_iter"></antcall>
		<eclipse.refreshLocal resource="./TLang" depth="infinite"/>
		<jar destfile="./tlang-iterative_n.jar" filesetmanifest="mergewithoutmain">
			<manifest>
			   	<attribute name="Main-Class" value="exampleprogs.Main"/>
			    <attribute name="Class-Path" value="."/>
			</manifest>
			<fileset dir="./src"/>
			<fileset dir="./src-gen"/>
		</jar>
	</target>
	
	<target name="declarative_0">
			<antcall target="cleanGen"></antcall>
			<copy file="adaptation/Compositions_decl_0.jrag" tofile="src/spec/Compositions.jrag" overwrite="true"/>
			<copy file="adaptation/PerformCompositions_decl_0.java" tofile="src/exampleprogs/PerformCompositions.java" overwrite="true"/>
			<eclipse.refreshLocal resource="./TLang/src" depth="infinite"/>
			<antcall target="build_decl"></antcall>
			<eclipse.refreshLocal resource="./TLang" depth="infinite"/>
			<jar destfile="./tlang-declarative_0.jar" filesetmanifest="mergewithoutmain">
				<manifest>
			    	<attribute name="Main-Class" value="exampleprogs.Main"/>
			        <attribute name="Class-Path" value="."/>
			    </manifest>
			    <fileset dir="./src"/>
				<fileset dir="./src-gen"/>
			</jar>
		</target>
		
		<target name="declarative_1">
			<antcall target="cleanGen"></antcall>
			<copy file="adaptation/Compositions_decl_0.jrag" tofile="src/spec/Compositions.jrag" overwrite="true"/>
			<copy file="adaptation/PerformCompositions_decl_1-n.java" tofile="src/exampleprogs/PerformCompositions.java" overwrite="true"/>
			<eclipse.refreshLocal resource="./TLang/src" depth="infinite"/>
			<antcall target="build_decl"></antcall>
			<eclipse.refreshLocal resource="./TLang" depth="infinite"/>
			<jar destfile="./tlang-declarative_1.jar" filesetmanifest="mergewithoutmain">
				<manifest>
				   	<attribute name="Main-Class" value="exampleprogs.Main"/>
				    <attribute name="Class-Path" value="."/>
				</manifest>
				<fileset dir="./src"/>
				<fileset dir="./src-gen"/>
			</jar>
		</target>
		
		<target name="declarative_n">
			<antcall target="cleanGen"></antcall>
			<copy file="adaptation/Compositions_decl_n.jrag" tofile="src/spec/Compositions.jrag" overwrite="true"/>
			<copy file="adaptation/PerformCompositions_decl_1-n.java" tofile="src/exampleprogs/PerformCompositions.java" overwrite="true"/>
			<eclipse.refreshLocal resource="./TLang/src" depth="infinite"/>
			<antcall target="build_decl"></antcall>
			<eclipse.refreshLocal resource="./TLang" depth="infinite"/>
			<jar destfile="./tlang-declarative_n.jar" filesetmanifest="mergewithoutmain">
				<manifest>
				   	<attribute name="Main-Class" value="exampleprogs.Main"/>
				    <attribute name="Class-Path" value="."/>
				</manifest>
				<fileset dir="./src"/>
				<fileset dir="./src-gen"/>
			</jar>
		</target>
	
	<target name="make all jars">
		<antcall target="iterative_0"></antcall>
		<antcall target="iterative_1"></antcall>
		<antcall target="iterative_n"></antcall>
		<antcall target="declarative_0"></antcall>
		<antcall target="declarative_1"></antcall>
		<antcall target="declarative_n"></antcall>
	</target>

  
</project>
